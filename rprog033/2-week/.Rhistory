record
}
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 3)
submit()
source("http://d396qusza40orc.cloudfront.net/rprog%2Fscripts%2Fsubmitscript1.R")
submit()
submit()
submit()
complete <- function (directory, id=1:332) {
prefix <- "00"
temp <- data.frame(cbind(0,0))
colnames(temp) <- c("id", "nobs")
for (i in 1:length(id)) {
length(id[i])
path <- paste(substr(prefix,nchar(as.character(id[i])),3),id[i], sep="")
path <- paste("./",directory,"/",path,".csv", sep="")
data <- read.csv(file=path, header=T)
temp[i,1] <- id[i]
temp[i,2] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate), ])
}
temp
}
submti()
submit()
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
record
}
complete("specdata", 1:332)
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
record
directory <- "Specdata"
directory <- "specdata"
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
record
data <- read.csv(file[291])
data <- read.csv(filez[291])
data <- read.csv(files[291])
data
files(is.na(files$nitrate))
data(is.na(data$nitrate))
data(is.na("nitrate"))
is.na(data$nitrate)
sum(is.na(data$nitrate))
sum(is.na(data$sulfate))
record{291,]
record[291,]
nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
record[,record$nobs == 0]
record[record$nobs == 0,]
data <- read.csv(files[275])
nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
record[275,]
setwd("~/Google Drive/Education/Coursera/datasciencecoursera/rprog033/2-week")
source('~/.active-rstudio-document')
?cor
record <- record[-(which[record$nobs == 0,])]
record <- record[-(which[record$nobs == 0])]
which(record$nobs==0)
record <- record[-(which[record$nobs == 0]),]
)
record <- record[-(which(record$nobs == 0),]
record <- record[-(which(record$nobs == 0)]
which(record$nobs==0)
-which(record$nobs==0)
record[-which(record$nobs==0),]
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
record <- record[-which(record$nobs==0),]
record
}
submit()
record
record <- record[-which(record$nobs==0),]
record
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
if(nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),]) == 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
}
record
}
complete("specdata")
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
#       if(nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),]) == 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
#       }
}
record
}
complete("specdata")
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
value <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
if(value == 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
}
record
}
complete(directory,291)
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
value <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
if(value == 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
}
record
}
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
value <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
if(value != 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
}
record
}
complete(directory,291)
complete(directory)
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
x <- 1
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
value <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
if(value != 0){
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
x <- x + 1
}
}
record
}
complete(directory)
submit()
record[which(record$nobs == 0),"nobs"] <- NA
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
record[which(record$nobs == 0),"nobs"] <- NA
record(291)
records[291]
record[291]
record[291,]
submit()
head(record)
records <- complete(directory)
record
records <- complete(directory)
complete <- function(directory, id = 1:332) {
record <- data.frame(id = integer(0), nobs = integer(0))
files <- vector('character')
files <- paste("00", id[id < 10], sep ="")
files <- c(files, paste("0", id[id > 9 & id < 100], sep = ""))
files <- c(files, id[id > 99])
if(sum(nchar(files) < 3) != 0)
files <- files[-which(nchar(files) != 3)]
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(id)) {
data <- read.csv(files[i], header = T)
record[i,"id"] <- id[i]
record[i,"nobs"] <- nrow(data[!is.na(data$sulfate) & !is.na(data$nitrate),])
}
#    record[which(record$nobs == 0),"nobs"] <- NA
record
}
records <- complete(directory)
threshold = 0
which(records$nobs > threshold)
View(record)
record <- records
records <- record[which(records$nobs > threshold), ]
records <- record[which(records$nobs > threshold), -1]
record <- records
records <- complete(directory)
record <- records
records <- record[which(records$nobs > threshold), -2]
cor <- data.frame()
cor <- data.frame("cor" = as.integer)
cor <- data.frame(cor = integer())
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
for(i in 1:nrow(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, cor$sulfate)
}
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, cor$sulfate)
}
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, cor$sulfate)
}
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate)
}
record <- data.frame(id = integer(0), nobs = integer(0))
data <- read.csv(files[i], header = T)
cor(data$nitrate, data$sulfate)
cor(data$nitrate, data$sulfate, na.rm = F)
cor(data$nitrate, data$sulfate, na.rm = T)
cor(data$nitrate, data$sulfate, use = "complete.obs")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
cor[1] <- 0
cor <- 0
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
summary(cor)
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
## Return a numeric vector of correlations
## NOTE: Do not round the result!
}
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
cor
}
corr(directory, 150)
records <- complete(directory)
threshold
threshold <- 150
records <- record[which(records$nobs > threshold), -2]
records <- complete(directory)
record <- records
records
which(records$nobs > threshold)
record[which(records$nobs > threshold), -2]
records <- record[which(records$nobs > threshold), -2]
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
head(cor)
summary(cor)
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
cor
}
corr(directory,150)
cr <- corr("specdata", 400)
summary(cr)
cr <- corr("specdata", 5000)
?return
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
if(records == 0){
return
}
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
cor
}
cr <- corr("specdata", 5000)
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
if(length(records) == 0){
return
}
cor <- 0
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
cor
}
cr <- corr("specdata", 5000)
strcor[1]
str(cor[1])
cor <- numeric()
corr <- function(directory, threshold = 0) {
records <- complete(directory)
records <- record[which(records$nobs > threshold), -2]
cor <- numeric()
if(length(records) != 0){
files <- vector('character')
files <- paste("00", records[records < 10], sep ="")
files <- c(files, paste("0", records[records > 9 & records < 100], sep = ""))
files <- c(files, records[records > 99])
files <- paste(directory,"/", files,".csv",sep="")
for(i in 1:length(records)){
data <- read.csv(files[i], header = T)
cor[i] <- cor(data$nitrate, data$sulfate, use = "complete.obs")
}
}
cor
}
cr <- corr("specdata", 5000)
cr
length(cr)
summary(cr)
submit()
submit()
submit()
corr <- function (directory, threshold=0) {
# WIP Start-up
# directory <- "specdata"
base <- paste("./",directory,"/", sep="")
files <- length(list.files(base)) # Number of files in the directory
digits <- nchar(as.character(files)) # Number of digits in filename format
correlation <- 0
cor.i <- 1 # Counter for adding new
# Determine starting 0-prefix for importing dataset
prefix <- ""
for(i in 1:(digits-1)) {
prefix <- paste(prefix,"0", sep="")
}
# Read each file and conduct analysis
for (i in 1:files) {
test <- complete(directory, i)
# Isolating necessary columns
if (test[[2]] >= threshold) {
if(nchar(as.character(i)) + nchar(prefix) > digits) {
prefix <- strtrim(prefix, nchar(prefix)-1)
}
temp <- read.csv(paste(base,prefix,i,".csv", sep=""), header = T)
temp <- temp[!is.na(temp$sulfate) & !is.na(temp$nitrate),
c("sulfate", "nitrate")]
# Storing correlation results
correlation[cor.i] <- cor(temp$sulfate, temp$nitrate)
cor.i <- cor.i + 1
}
}
correlation
}
submit()
version
